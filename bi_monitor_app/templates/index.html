{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.css" %}" rel="stylesheet">
    <link href="{% static "bootstrap-datetimepicker-master/sample in bootstrap v2/bootstrap/css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "css/base.css" %}" rel="stylesheet">
    <script src="{% static "js/jquery-3.2.1.min.js" %}"></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
    <script src="{% static "bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js" %}"></script>
    <script src="{% static "bootstrap-datetimepicker-master/js/locales/bootstrap-datetimepicker.fr.js" %}"></script>
</head>
<body>
    <div id="mainBody">
        <div class="span3 leftcol" style="width:160px">
            <ul class="nav nav-sidebar bs-docs-sidenav">
                {# 左侧的导航条，每次增加一个监控项目，都需要增加一个导航条，需要指定<a>的 id 属性为 api_id #}
                {# api_id 维护在view层的urls文件中 #}
                <li>
                    <a href="#myContent" data-toggle="tab" class="my_tab_item" api_id="bi_api_week_report">
                        <i class="glyphicon glyphicon-menu-right"></i>
                        api周报
                    </a>
                </li>
            </ul>
        </div>

        <div id="rightCol" style="margin-left:270px">
            <div id="myTabContent" class="tab-content">
                {# 右侧的内容 #}
                <div class="tab-pane fade in active" id="myContent">
                    <div class="table-responsive">
                        <caption>默认打开的首页活跃页面</caption>
                    </div>
                </div>
            </div>
        </div>

        <script>
            {# 表格列表请求 #}
            $(document).on("click", ".my_tab_item", function () {
                $.get(
                    '/list/',
                    {
                        'api_id': this.api_id
                    },
                    function(data, status) {
                        $('#rightCol').html(data);
                    }
                )
            });
            {# 表格详情请求 #}
            $(document).on("click", ".my_list_item", function () {
                $.get(
                    '/content/',
                    {
                        'api_id': this.api_id,
                        'item_id': this.item_id
                    },
                    function(data, status) {
                        $('#rightCol').html(data);
                    }
                )
            });
        </script>
    </div>
</body>
</html>
